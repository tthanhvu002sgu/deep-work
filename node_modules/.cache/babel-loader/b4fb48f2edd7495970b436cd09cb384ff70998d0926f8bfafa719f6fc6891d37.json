{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vu\\\\Documents\\\\vscode\\\\deepwork\\\\deepwork\\\\src\\\\components\\\\HistoryView.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nconst HistoryView = ({\n  sessions,\n  tasks,\n  filter,\n  setFilter\n}) => {\n  _s();\n  // Tổng hợp dữ liệu cho biểu đồ\n  const chartData = React.useMemo(() => {\n    const dataByTask = sessions.reduce((acc, session) => {\n      acc[session.taskId] = (acc[session.taskId] || 0) + session.duration;\n      return acc;\n    }, {});\n    const taskMap = tasks.reduce((map, task) => {\n      map[task.id] = task.name;\n      return map;\n    }, {});\n    const labels = Object.keys(dataByTask).map(taskId => taskMap[taskId] || 'Task đã xóa');\n    const data = Object.values(dataByTask).map(totalSeconds => Math.round(totalSeconds / 60));\n    return {\n      labels,\n      data\n    };\n  }, [sessions, tasks]);\n  const data = {\n    labels: chartData.labels,\n    datasets: [{\n      label: 'Thời gian tập trung (phút)',\n      data: chartData.data,\n      backgroundColor: 'rgba(59, 130, 246, 0.7)',\n      borderRadius: 5\n    }]\n  };\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    indexAxis: 'y',\n    scales: {\n      x: {\n        grid: {\n          display: false\n        },\n        ticks: {\n          display: false\n        }\n      },\n      y: {\n        grid: {\n          display: false\n        },\n        ticks: {\n          font: {\n            size: 10\n          }\n        }\n      }\n    },\n    plugins: {\n      legend: {\n        display: false\n      },\n      tooltip: {\n        callbacks: {\n          label: context => `${context.raw} phút`\n        }\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center bg-slate-200 p-1 rounded-lg mb-4 max-w-xs mx-auto\",\n      children: ['day', 'week', 'month'].map(f => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setFilter(f),\n        className: `flex-1 capitalize text-sm font-semibold py-1.5 rounded-md transition-colors ${filter === f ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500'}`,\n        children: f === 'day' ? 'Ngày' : f === 'week' ? 'Tuần' : 'Tháng'\n      }, f, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-[150px] bg-white rounded-xl shadow-sm p-3\",\n      children: chartData.data.length > 0 ? /*#__PURE__*/_jsxDEV(Bar, {\n        data: data,\n        options: options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 38\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-slate-400 pt-12\",\n        children: \"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u cho kho\\u1EA3ng th\\u1EDDi gian n\\xE0y.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 78\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(HistoryView, \"i4eYYg6GOj65klTCDK4mhi4wfgw=\");\n_c = HistoryView;\nexport default HistoryView;\nvar _c;\n$RefreshReg$(_c, \"HistoryView\");","map":{"version":3,"names":["React","Bar","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","jsxDEV","_jsxDEV","register","HistoryView","sessions","tasks","filter","setFilter","_s","chartData","useMemo","dataByTask","reduce","acc","session","taskId","duration","taskMap","map","task","id","name","labels","Object","keys","data","values","totalSeconds","Math","round","datasets","label","backgroundColor","borderRadius","options","responsive","maintainAspectRatio","indexAxis","scales","x","grid","display","ticks","y","font","size","plugins","legend","tooltip","callbacks","context","raw","className","children","f","onClick","fileName","_jsxFileName","lineNumber","columnNumber","length","_c","$RefreshReg$"],"sources":["C:/Users/Vu/Documents/vscode/deepwork/deepwork/src/components/HistoryView.js"],"sourcesContent":["import React from 'react';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\r\n\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\r\n\r\nconst HistoryView = ({ sessions, tasks, filter, setFilter }) => {\r\n  // Tổng hợp dữ liệu cho biểu đồ\r\n  const chartData = React.useMemo(() => {\r\n    const dataByTask = sessions.reduce((acc, session) => {\r\n      acc[session.taskId] = (acc[session.taskId] || 0) + session.duration;\r\n      return acc;\r\n    }, {});\r\n\r\n    const taskMap = tasks.reduce((map, task) => {\r\n      map[task.id] = task.name;\r\n      return map;\r\n    }, {});\r\n\r\n    const labels = Object.keys(dataByTask).map(taskId => taskMap[taskId] || 'Task đã xóa');\r\n    const data = Object.values(dataByTask).map(totalSeconds => Math.round(totalSeconds / 60));\r\n\r\n    return { labels, data };\r\n  }, [sessions, tasks]);\r\n\r\n  const data = {\r\n    labels: chartData.labels,\r\n    datasets: [{\r\n      label: 'Thời gian tập trung (phút)',\r\n      data: chartData.data,\r\n      backgroundColor: 'rgba(59, 130, 246, 0.7)',\r\n      borderRadius: 5,\r\n    }]\r\n  };\r\n  \r\n  const options = {\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        indexAxis: 'y',\r\n        scales: {\r\n            x: { grid: { display: false }, ticks: { display: false } },\r\n            y: { grid: { display: false }, ticks: { font: { size: 10 }}}\r\n        },\r\n        plugins: {\r\n            legend: { display: false },\r\n            tooltip: {\r\n                callbacks: {\r\n                    label: (context) => `${context.raw} phút`\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n  return (\r\n    <div className=\"mb-6\">\r\n      <div className=\"flex justify-center bg-slate-200 p-1 rounded-lg mb-4 max-w-xs mx-auto\">\r\n        {['day', 'week', 'month'].map(f => (\r\n          <button \r\n            key={f}\r\n            onClick={() => setFilter(f)}\r\n            className={`flex-1 capitalize text-sm font-semibold py-1.5 rounded-md transition-colors ${filter === f ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500'}`}\r\n          >\r\n            {f === 'day' ? 'Ngày' : (f === 'week' ? 'Tuần' : 'Tháng')}\r\n          </button>\r\n        ))}\r\n      </div>\r\n      <div className=\"h-[150px] bg-white rounded-xl shadow-sm p-3\">\r\n        {chartData.data.length > 0 ? <Bar data={data} options={options} /> : <p className=\"text-center text-slate-400 pt-12\">Không có dữ liệu cho khoảng thời gian này.</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HistoryView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}